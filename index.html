<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, maximum-scale=5.0">
  <meta name="description" content="Minha Loja - E-commerce completo com os melhores produtos e ofertas exclusivas">
  <meta name="keywords" content="e-commerce, loja online, produtos, ofertas, roupas, acess√≥rios">
  <meta name="author" content="Minha Loja">
  <meta name="theme-color" content="#667eea">
  <title>Minha Loja - E-commerce Completo</title>
  
  <!-- Preconnect para melhor performance -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="preconnect" href="https://cdnjs.cloudflare.com">
  
  <!-- Stylesheets -->
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="cart-modal.css">
  <link rel="stylesheet" href="register-modal.css">
  <link rel="stylesheet" href="product-styles.css">
  
  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  
  <!-- Scripts -->
  <script src="auth-config.js"></script>
  <script type="module" src="firebase-config.js"></script>
  <script type="module" src="auth-manager.js"></script>
  <script type="module" src="product-manager.js"></script>
</head>
<body>
  <!-- Header Principal -->
  <header>
    <div class="container">
      <div class="header-content">
        <div class="logo-section">
          <h1 onclick="showSection('home')" id="store-name">
            <i class="fas fa-store"></i>
            Minha Loja
          </h1>
        </div>
        
        <!-- Mobile Menu Toggle -->
        <button class="mobile-menu-toggle" onclick="toggleMobileMenu()" aria-label="Menu">
          <span></span>
          <span></span>
          <span></span>
        </button>
        
        <!-- Navigation -->
        <nav class="navbar" id="navbar">
          <ul class="nav-links">
            <li><a href="#home" class="nav-link active" onclick="showSection('home')">
              <i class="fas fa-home"></i>
              <span>Home</span>
            </a></li>
            <li><a href="#produtos" class="nav-link" onclick="showSection('produtos')">
              <i class="fas fa-shopping-bag"></i>
              <span>Produtos</span>
            </a></li>
            <li><a href="#sobre" class="nav-link" onclick="showSection('sobre')">
              <i class="fas fa-info-circle"></i>
              <span>Sobre</span>
            </a></li>
            <li><a href="#contato" class="nav-link" onclick="showSection('contato')">
              <i class="fas fa-envelope"></i>
              <span>Contato</span>
            </a></li>
          </ul>
        </nav>
        
        <!-- Search Section -->
        <div class="search-section">
          <div class="search-container">
            <i class="fas fa-search"></i>
            <input type="text" id="search-input" placeholder="Buscar produtos..." 
                   onkeypress="handleSearchKeypress(event)">
          </div>
          <button class="search-btn" onclick="searchProducts()">
            <i class="fas fa-search"></i>
            <span class="btn-text">Buscar</span>
          </button>
        </div>
        
        <!-- User Section -->
        <div class="user-section">
          <div class="auth-buttons">
            <button class="btn-login" onclick="showLoginModal()">
              <i class="fas fa-sign-in-alt"></i>
              <span>Entrar</span>
            </button>
          </div>
          
          <div class="user-info">
            <i class="fas fa-user-circle"></i>
            <span id="user-name">Usu√°rio</span>
          </div>
          
          <button class="cart-icon" onclick="showCartModal()" aria-label="Carrinho de compras">
            <i class="fas fa-shopping-cart"></i>
            <span class="cart-count" id="cart-count">0</span>
          </button>
        </div>
      </div>
    </div>
  </header>

  <main id="main-content">
    <!-- Se√ß√£o Home -->
    <section id="home" class="section active">
      <div class="container">
        <div class="hero">
          <div class="hero-content">
            <h1>Bem-vindo √† Nossa Loja</h1>
            <p>Descubra os melhores produtos com as melhores ofertas. Qualidade garantida e entrega r√°pida para todo o Brasil.</p>
            <button onclick="showSection('produtos')" class="cta-button pulse">
              <i class="fas fa-shopping-bag"></i> Ver Produtos
            </button>
          </div>
        </div>
        
        <div class="featured-section">
          <h2>Produtos em Destaque</h2>
          <div class="featured-products" id="featured-products">
            <!-- Produtos em destaque ser√£o carregados aqui -->
          </div>
        </div>
      </div>
    </section>

    <!-- Se√ß√£o Produtos -->
    <section id="produtos" class="section">
      <div class="container">
        <div class="products-header">
          <h2>Nossos Produtos</h2>
          <div class="filters">
            <select id="category-filter" onchange="filterProducts()">
              <option value="">Todas as Categorias</option>
              <option value="roupas">Roupas</option>
              <option value="acessorios">Acess√≥rios</option>
              <option value="calcados">Cal√ßados</option>
            </select>
            <input type="range" id="price-filter" min="0" max="500" value="500" onchange="filterProducts()">
            <span>At√© R$ <span id="price-value">500</span></span>
          </div>
        </div>
        
        <div class="products-grid" id="product-list">
          <!-- Os produtos ser√£o carregados aqui -->
        </div>
        
        <div class="product-count">
          <span id="products-count">0 produtos encontrados</span>
        </div>
      </div>
    </section>

    <!-- Se√ß√£o Sobre -->
    <section id="sobre" class="section">
      <div class="container">
        <div class="about-content">
          <h2>Sobre Nossa Loja</h2>
          <div class="about-grid">
            <div class="about-text">
              <p>Somos uma loja dedicada a oferecer produtos de alta qualidade com os melhores pre√ßos do mercado. Nossa miss√£o √© proporcionar uma experi√™ncia de compra excepcional para todos os nossos clientes.</p>
              <div class="features">
                <div class="feature">
                  <i class="fas fa-shipping-fast"></i>
                  <h4>Entrega R√°pida</h4>
                  <p>Entregamos em todo o Brasil com rapidez e seguran√ßa</p>
                </div>
                <div class="feature">
                  <i class="fas fa-shield-alt"></i>
                  <h4>Compra Segura</h4>
                  <p>Seus dados est√£o protegidos com criptografia de ponta</p>
                </div>
                <div class="feature">
                  <i class="fas fa-headset"></i>
                  <h4>Suporte 24/7</h4>
                  <p>Atendimento ao cliente sempre dispon√≠vel</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Se√ß√£o Contato -->
        <!-- Se√ß√£o Contato -->
    <section id="contato" class="section">
      <div class="container">
        <div class="contact-content">
          <h2>Entre em Contato</h2>
          <div class="contact-grid">
            <div class="contact-info">
              <div class="contact-item">
                <i class="fas fa-map-marker-alt"></i>
                <div>
                  <h4>Endere√ßo</h4>
                  <p>Rua das Compras, 123<br>Centro, S√£o Paulo - SP</p>
                </div>
              </div>
              <div class="contact-item">
                <i class="fas fa-phone"></i>
                <div>
                  <h4>Telefone</h4>
                  <p>(11) 9999-8888</p>
                </div>
              </div>
              <div class="contact-item">
                <i class="fas fa-envelope"></i>
                <div>
                  <h4>E-mail</h4>
                  <p>contato@minhaloja.com</p>
                </div>
              </div>
            </div>
            
            <form class="contact-form" onsubmit="submitContactForm(event)">
              <h3>Envie uma Mensagem</h3>
              <input type="text" placeholder="Seu Nome" required>
              <input type="email" placeholder="Seu E-mail" required>
              <input type="text" placeholder="Assunto" required>
              <textarea placeholder="Sua Mensagem" rows="5" required></textarea>
              <button type="submit" class="btn-primary">
                <i class="fas fa-paper-plane"></i> Enviar Mensagem
              </button>
            </form>
          </div>
        </div>
      </div>
    </section>
  </main>

  <!-- Modal do Carrinho -->
  <div id="cart-modal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2><i class="fas fa-shopping-cart"></i> Seu Carrinho</h2>
        <span class="close" onclick="closeCartModal()">&times;</span>
      </div>
      <div class="modal-body">
        <div id="cart-items-modal">
          <!-- Itens do carrinho ser√£o carregados aqui -->
        </div>
      </div>
      <div class="modal-footer">
        <div class="cart-total">
          <span>Total:</span>
          <span>R$ <span id="cart-total-modal">0.00</span></span>
        </div>
        <div class="cart-actions">
          <button onclick="proceedToCheckout()" class="btn-checkout">
            <i class="fas fa-credit-card"></i> Finalizar Compra
          </button>
          <button onclick="clearCart()" class="btn-clear">
            <i class="fas fa-trash"></i> Limpar Carrinho
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal de Login -->
  <div id="login-modal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeLoginModal()">&times;</span>
      <h2><i class="fas fa-sign-in-alt"></i> Entrar na Sua Conta</h2>
      <form onsubmit="handleLogin(event)">
        <input type="email" placeholder="E-mail" name="email" required>
        <input type="password" placeholder="Senha" name="password" required>
        <button type="submit" class="btn-primary">
          <i class="fas fa-sign-in-alt"></i> Entrar
        </button>
      </form>
      
      <div class="modal-divider">
        <span>ou</span>
      </div>
      
      <div class="register-link">
        <p>Ainda n√£o tem uma conta?</p>
        <button onclick="switchToRegister()" class="btn-link">
          <i class="fas fa-user-plus"></i> Criar uma conta
        </button>
      </div>
      
      <div class="forgot-password">
        <button onclick="showForgotPassword()" class="btn-link">
          <i class="fas fa-key"></i> Esqueci minha senha
        </button>
      </div>
    </div>
  </div>

  <!-- Modal de Cadastro -->
  <div id="register-options-modal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeRegisterModal()">&times;</span>
      <h2>Escolha o Tipo de Cadastro</h2>
      <div class="register-options">
        <button class="register-option-btn" onclick="openClientRegister()">
          <i class="fas fa-user"></i>
          <h3>Cadastro de Cliente</h3>
          <p>Para comprar produtos em nossa loja</p>
        </button>
        <button class="register-option-btn" onclick="openAdminRegister()">
          <i class="fas fa-user-cog"></i>
          <h3>Cadastro de Administrador</h3>
          <p>Para gerenciar a loja</p>
        </button>
      </div>
    </div>
  </div>

  <div id="register-modal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeRegisterModal()">&times;</span>
      <h2 id="register-title">Cadastro</h2>
      <form id="register-form" onsubmit="handleRegister(event)">
        <input type="text" placeholder="Nome Completo" name="name" required>
        <input type="email" placeholder="E-mail" name="email" required>
        <input type="password" placeholder="Senha (min. 6 caracteres)" name="password" required minlength="6">
        <input type="password" placeholder="Confirmar Senha" name="confirmPassword" required>
        <input type="tel" placeholder="Telefone" name="phone">
        <div id="admin-fields" style="display: none;">
          <input type="password" placeholder="C√≥digo de Administrador" name="adminCode">
        </div>
        <button type="submit" class="btn-primary">
          <i class="fas fa-user-plus"></i> Cadastrar
        </button>
      </form>
    </div>
  </div>

  <!-- Modal de Detalhes do Produto -->
  <div id="product-modal" class="modal">
    <div class="modal-content large">
      <span class="close" onclick="closeProductModal()">&times;</span>
      <div id="product-details">
        <!-- Detalhes do produto ser√£o carregados aqui -->
      </div>
    </div>
  </div>

  <!-- Modal de Esqueci Minha Senha -->
  <div id="forgot-password-modal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeForgotPasswordModal()">&times;</span>
      <h2><i class="fas fa-key"></i> Recuperar Senha</h2>
      <p class="forgot-description">Digite seu e-mail para receber as instru√ß√µes de recupera√ß√£o de senha.</p>
      <form onsubmit="handleForgotPassword(event)">
        <input type="email" placeholder="Seu e-mail" name="email" required>
        <button type="submit" class="btn-primary">
          <i class="fas fa-paper-plane"></i> Enviar Link de Recupera√ß√£o
        </button>
      </form>
      <div class="back-to-login">
        <button onclick="backToLogin()" class="btn-link">
          <i class="fas fa-arrow-left"></i> Voltar ao Login
        </button>
      </div>
    </div>
  </div>

  <footer class="footer">
    <div class="container">
      <div class="footer-content">
        <div class="footer-section">
          <h3>Minha Loja</h3>
          <p>Sua loja online de confian√ßa com produtos de qualidade e os melhores pre√ßos.</p>
        </div>
        <div class="footer-section">
          <h3>Links √öteis</h3>
          <ul>
            <li><a href="#produtos" onclick="showSection('produtos')">Produtos</a></li>
            <li><a href="#sobre" onclick="showSection('sobre')">Sobre</a></li>
            <li><a href="#contato" onclick="showSection('contato')">Contato</a></li>
          </ul>
        </div>
        <div class="footer-section">
          <h3>Atendimento</h3>
          <p><i class="fas fa-phone"></i> (11) 9999-8888</p>
          <p><i class="fas fa-envelope"></i> contato@minhaloja.com</p>
          <p><i class="fas fa-clock"></i> Seg-Sex: 9h-18h</p>
        </div>
      </div>
      <div class="footer-bottom">
        <p>&copy; <span id="ano"></span> Minha Loja. Todos os direitos reservados.</p>
      </div>
    </div>
  </footer>

  <!-- Bot√£o de teste tempor√°rio -->
  <div style="position: fixed; top: 10px; right: 10px; z-index: 9999;">
    <button onclick="testFirebaseConnection()" style="background: #ff6b6b; color: white; border: none; padding: 10px; border-radius: 5px; cursor: pointer;">
      üî• Teste Firebase
    </button>
  </div>

  <script src="script.js"></script>
  
  <script>
    // Fun√ß√£o de teste do Firebase
    window.testFirebaseConnection = async function() {
      console.log('üîÑ Testando Firebase...');
      
      try {
        const firebaseModule = await import('./firebase-config.js');
        console.log('‚úÖ Firebase importado');
        
        if (firebaseModule.firebaseService) {
          console.log('‚úÖ FirebaseService dispon√≠vel');
          
          const testEmail = `teste${Date.now()}@exemplo.com`;
          const result = await firebaseModule.firebaseService.signUp(testEmail, '123456', {
            nome: 'Teste User',
            tipo: 'cliente'
          });
          
          console.log('üìä Resultado:', result);
          alert(result.success ? '‚úÖ Firebase OK!' : `‚ùå Erro: ${result.error}`);
        } else {
          console.error('‚ùå FirebaseService n√£o encontrado');
          alert('‚ùå FirebaseService n√£o encontrado');
        }
      } catch (error) {
        console.error('‚ùå Erro:', error);
        alert(`‚ùå Erro: ${error.message}`);
      }
    };
  </script>
</body>
</html>